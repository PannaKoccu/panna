Требования к системе
Локальная машина (Ansible Controller)..........................................................................

    ОС: Linux, macOS или Windows
    Ansible ≥ 2.10
    Python ≥ 3.8
    SSH-клиент
    Доступ к интернету
    Свободное место: ~2 ГБ

Виртуальные машины (целевые хосты).............................................................................

    2 ВМ на базе VirtualBox, VMware или Vagrant
    ОС: Ubuntu 22.04 LTS (Server)
    Сетевой режим: Bridged
    Минимальные ресурсы на ВМ:
        CPU: 1 ядро
        RAM: 1 ГБ
        HDD: 10 ГБ
    Начальный пользователь с паролем (для удобства, чтобы не переписывать 19a04a1976) и именем vm1=test1, vm2=test2.
    Открытый порт 22 (SSH) на обеих ВМ

Сетевые настройки.................................................................................................

    IP от VM1 (Application + DB) и VM2 (Web Server) нужно заменить в inventory файлах и файле all.yml
    Хостовая машина: должна иметь доступ к этим IP
    В файле /etc/hosts на хосте нужно добавить: ip2 app.devops.local  //где ip2 - ip второй vm с веб-сервером.

Пошаговая инструкция по развертыванию..............................................................................
Шаги:

    Создайте 2 виртуальные машины с Ubuntu 22.04 LTS Server и пользователями test1 и test2 с паролем 19a04a1976  //можно другие, но придётся менять, как сказано выше//.
    Убедитесь, что пользователь имеет права sudo.
    По умолчанию порт 22 открыт без ufw, но если установлен, то откройте.
    С помощью команды hostname -I узнайте ip адреса двух vm и впишите, как сказано в пункте с сетевыми настройками.
    На основном хосте склонируйте репозиторий https://github.com/PannaKoccu/panna.git и зайдите в папку ansible1 в терминале.
    Далее в терминале вставьте команду ansible-playbook playbooks/site.yml --ask-become-pass --ask-vault-pass. Введите пароль(19a04a1976) и пароль от vault(1976).


Инструкция с заменой ip и пароля от пользователя, и базы данных.......................................................................
    
    Сразу узнаём ip командой hostname -I на обоих vm и используем как в пункте сетевые настройки.
    Потом переходим в папку ansible1 и используем команду ansible-vault edit ./group_vars/vault.yml, пароль 1976. Подставляем туда свои данные и выходим. также делаем и с вторым файлом ./group_vars/vault.yml. Первый файл содержит пароль от БД, ключ и пароль от VM1, второй файл содержит пароль от VM2.

Повторный запуск и обновления..........................................................................................

    Как сказано выше, можно запустить playbook для полной настройки системы командой ansible-playbook playbooks/site.yml --ask-become-pass --ask-vault-pass. Также существует playbook для обновления приложения. Запускается командой ansible-playbook playbooks/update.yml --ask-vault-pass. Но для его запуска и запуска основного плейбука повторно требуется использовать другой inventory файл, так как вход по паролю будет недоступен. Его можно указать явно: ansible-playbook -i inventory2.ini playbooks/site.yml --ask-become-pass --ask-vault-pass или можно изменить путь в файле ansible.cfg.
 

Роль: `common`

**Назначение**:  
Базовая настройка ОС на всех серверах.

**Выполняет**:
- Создание пользователя `devops` с sudo-доступом без пароля.
- Настройка SSH: отключение входа по паролю и root login.
- Установка базовых пакетов (`curl`, `git`, `python3-pip` и др.).
- Настройка и включение UFW (разрешены порты 22, 80, 443).

**Используемые переменные**:
- `vault_ansible_password` — для первоначального подключения.

**Handlers**:
- `restart ssh` — перезапуск SSH после изменения конфига.




    